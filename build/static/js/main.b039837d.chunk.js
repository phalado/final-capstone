(this["webpackJsonpfinal-capstone"]=this["webpackJsonpfinal-capstone"]||[]).push([[0],{37:function(e,t,a){},40:function(e,t,a){e.exports=a(77)},49:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),s=a.n(c),o=a(16),u=a(9),l=a(3),i=a(7),m=(a(49),function(e){var t=e.user,a=e.logOut;return t.logged?r.a.createElement("header",{className:"header"},r.a.createElement("div",null,r.a.createElement(l.b,{to:"/"},r.a.createElement("button",{type:"button",className:"header-button"},r.a.createElement("img",{src:"/contents/httyd-icon2.png",alt:"Home",className:"header-button-img"})))),r.a.createElement("div",null,r.a.createElement("h1",null,"Berk's Dragon Flying Academy")),r.a.createElement("div",{className:"account-buttons-container"},r.a.createElement(l.b,{to:"/account"},r.a.createElement("button",{type:"button",className:"account-button"},t.name.split(" ")[0])),r.a.createElement(l.b,{to:"/login"},r.a.createElement("button",{type:"button",className:"account-button",onClick:function(){a();var e=JSON.stringify({id:"",name:"",email:"",remember:!1});localStorage.setItem("localUser",e)}},"Logout")))):r.a.createElement("header",{className:"header"},r.a.createElement("div",null,r.a.createElement(l.b,{to:"/"},r.a.createElement("button",{type:"button",className:"header-button"},r.a.createElement("img",{src:"/contents/httyd-icon2.png",alt:"Home",className:"header-button-img"})))),r.a.createElement("div",null,r.a.createElement("h1",null,"Berk's Dragon Flying Academy")),r.a.createElement("div",null,r.a.createElement(l.b,{to:"/login"},r.a.createElement("button",{type:"button",className:"account-button"},"Login")),r.a.createElement(l.b,{to:"/signup"},r.a.createElement("button",{type:"button",className:"account-button"},"Signup"))))}),d=function(e){return{type:"ADD_CLASS",classy:e}},p=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{logOut:function(t){e({type:"LOGOUT"})}}}))(m),f=a(1),b=a.n(f),E=a(4),g=a(10),h=a.n(g),v=function(){var e=Object(E.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://dragon-test-drive-api.herokuapp.com/instructors",e.next=3,h.a.get("https://dragon-test-drive-api.herokuapp.com/instructors");case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(E.a)(b.a.mark((function e(t){var a,n,r,c,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.instuctorID,n=t.userID,r=t.classTime,c=t.status,"https://dragon-test-drive-api.herokuapp.com/fly_classes/",s="instructor_id=".concat(a,"&user_id=").concat(n,"&classTime=").concat(r,"&status=").concat(c),e.next=5,h.a.post("".concat("https://dragon-test-drive-api.herokuapp.com/fly_classes/","?").concat(s));case 5:return o=e.sent,e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(E.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://dragon-test-drive-api.herokuapp.com/fly_classes",e.next=3,h.a.get("https://dragon-test-drive-api.herokuapp.com/fly_classes");case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(E.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://dragon-test-drive-api.herokuapp.com/fly_classes/",e.next=3,h.a.delete("".concat("https://dragon-test-drive-api.herokuapp.com/fly_classes/").concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(E.a)(b.a.mark((function e(t){var a,n,r,c,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.email,r=t.pass,c=t.conf,"https://dragon-test-drive-api.herokuapp.com/users",s="name=".concat(a,"&email=").concat(n,"&password=").concat(r,"&password_confirmation=").concat(c),e.next=5,h.a.post("".concat("https://dragon-test-drive-api.herokuapp.com/users","?").concat(s));case 5:return o=e.sent,e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(E.a)(b.a.mark((function e(t){var a,n,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.pass,"https://dragon-test-drive-api.herokuapp.com/login",r="email=".concat(a,"&password=").concat(n),e.next=5,h.a.get("".concat("https://dragon-test-drive-api.herokuapp.com/login","?").concat(r));case 5:return c=e.sent,e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(E.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://dragon-test-drive-api.herokuapp.com/users",e.next=3,h.a.get("".concat("https://dragon-test-drive-api.herokuapp.com/users"));case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=(a(69),function(e){var t=e.instructors,a=e.addInst,c=e.addClassy,s=e.addUsr;return Object(n.useEffect)((function(){var e=!0,t=function(){var t=Object(E.a)(b.a.mark((function t(){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:n=t.sent,e&&(r=[],n.forEach((function(e){r.push(e)})),(c=r)!==[]&&c.forEach((function(e){a(e)})));case 4:case"end":return t.stop()}var c}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(E.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:a=t.sent,e&&(n=[],a.forEach((function(e){n.push(e)})),(r=n)!==[]&&r.forEach((function(e){c(e)})));case 4:case"end":return t.stop()}var r}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var t=Object(E.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S();case 2:a=t.sent,e&&(n=[],a.forEach((function(e){n.push(e)})),(r=n)!==[]&&r.forEach((function(e){s(e)})));case 4:case"end":return t.stop()}var r}),t)})));return function(){return t.apply(this,arguments)}}();return t(),n(),r(),function(){e=!1}}),[]),r.a.createElement("nav",{className:"navbar-container"},r.a.createElement(l.b,{to:"/",className:"navbar-link"},"Home"),r.a.createElement(l.b,{to:"/instructors",className:"navbar-link"},"Instructors"),r.a.createElement("ul",null,t.map((function(e){return r.a.createElement(l.b,{to:"/instFile/".concat(e.id),key:e.id,className:"navbar-instructors"},r.a.createElement("li",null,e.name.split(" ")[0]))}))),r.a.createElement(l.b,{to:"how-to-schedulle",className:"navbar-link"},"How to schedulle a class"),r.a.createElement(l.b,{to:"/about",className:"navbar-link"},"About us"))}),x=Object(u.b)((function(e){return{instructors:e.instructors,signedUsers:e.signedUsers}}),(function(e){return{addInst:function(t){e(function(e){return{type:"ADD_INSTRUCTOR",instructor:e}}(t))},addClassy:function(t){e(d(t))},addUsr:function(t){e(function(e){return{type:"ADD_USERS",user:e}}(t))}}}))(j),D=(a(70),function(){return r.a.createElement("div",{className:"home"},r.a.createElement("h1",{className:"home-tittle"},"Welcome to Berk"),r.a.createElement("img",{src:"./contents/berk.jpg",alt:"Berk"}),r.a.createElement("h2",{className:"home-tittle"},'"Life here is amazing. Dragons used to be a bit of a problem, but now they\u2019ve all moved in."'),r.a.createElement("h2",{className:"home-tittle"},"And now we have the only in the world Dragon Flying Academy"),r.a.createElement(l.b,{to:"/instructors"},r.a.createElement("button",{type:"button"},r.a.createElement("img",{src:"./contents/instructors.jpg",alt:"Instructors"}))),r.a.createElement(l.b,{to:"/login"},r.a.createElement("button",{type:"button"},"Login")),r.a.createElement(l.b,{to:"/signup"},r.a.createElement("button",{type:"button"},"Signup")))}),I=function(e){var t=e.instructor,a=t.id,n=t.name,c=t.instImage;return r.a.createElement("div",{className:"inst-container"},r.a.createElement("h2",{className:"inst-name"},n.split(" ")[0]),r.a.createElement(l.b,{to:"/instFile/".concat(a)},r.a.createElement("button",{className:"inst-button",type:"button"},r.a.createElement("img",{src:c,alt:n,className:"inst-image"}))))},_=(a(71),function(e){var t=e.instructors;return r.a.createElement("div",null,r.a.createElement("h1",{className:"mt-3"},"Check our Dragon Trainers"),r.a.createElement("div",{className:"instructors-list"},t.map((function(e){return r.a.createElement(I,{key:e.id,instructor:e})}))))}),T=(a(72),function(e,t){var a=window.location.href.split("".concat(t,"/"))[1],n=e.filter((function(e){return e.id===parseInt(a,10)}))[0];return n||(n={id:"",name:"",instImage:"",dragonName:"",dragonType:"",dragonImage:""}),n}),U=function(e){var t=e.instructors,a=T(t,"instFile"),n=a.id,c=a.name,s=a.instImage,o=a.dragonName,u=a.dragonType,i=a.dragonImage;return r.a.createElement("div",null,r.a.createElement("div",{className:"inst-file-container"},r.a.createElement("div",{className:"inst-image-container"},r.a.createElement("img",{src:s,alt:c,className:"inst-file-image"})),r.a.createElement("div",{className:"inst-data"},r.a.createElement("h1",null,c),r.a.createElement("h2",null,"Dragon: ".concat(o)),r.a.createElement("h2",null,"Dragon type: ".concat(u)),r.a.createElement(l.b,{to:"/instSchedule/".concat(n)},r.a.createElement("button",{type:"button"},"Instructor's schedule"))),r.a.createElement("div",{className:"dragon-image-container"},r.a.createElement("img",{src:i,alt:o,className:"dragon-image"}))))},C=a(11),A=a.n(C),L=function(){switch(A()().format("dddd")){case"Sunday":return 1;case"Monday":return 0;case"Tuesday":return-1;case"Wednesday":return-2;case"Thursday":return-3;case"Friday":return-4;case"Saturday":return-5;default:return null}},F=function(e){var t=e.user,a=e.date,n=e.onClick,c=e.classes,s=e.signedUsers,o=c.filter((function(e){return A()(e.classTime).format()===A()(a).format()}));if(o[0]){var u=s.filter((function(e){return e.id===o[0].user}));return 0===u.length&&u.push({id:0}),u[0].id===t.id?r.a.createElement("th",null,r.a.createElement("div",{className:"cells"},u[0].name,r.a.createElement("button",{type:"button",onClick:function(){return n(a,o[0].id,!0)}},"Cancel"))):r.a.createElement("th",null,r.a.createElement("div",{className:"cells"},u[0].name))}return r.a.createElement("th",null,r.a.createElement("div",{className:"cells"},"Open spot",r.a.createElement("button",{type:"button",onClick:function(){return n(a,0,!1)}},"Schedule")))},M=function(e){var t=e.user,a=e.date,n=e.clickHandler,c=e.classes,s=e.signedUsers;return r.a.createElement("tr",{className:"table-rows"},function(){for(var e=[r.a.createElement("th",{key:a},A()(a).format("LT"))],o=0;o<5;o+=1)e.push(r.a.createElement(F,{user:t,date:A()(a).add(L()+o,"days").format(),onClick:function(e,t,a){return n(e,t,a)},classes:c,signedUsers:s,key:A()(a).add(L()+o,"days").format()}));return e}())},R=(a(74),function(e){var t=e.instructors,a=e.user,n=e.classes,c=e.signedUsers,s=e.addClassy,o=e.removeClassy,u=T(t,"instSchedule"),l=function(){var e=Object(E.a)(b.a.mark((function e(t,n,r){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return e.next=3,k(n);case 3:o(n),e.next=10;break;case 6:return e.next=8,y({instuctorID:u.id,userID:a.id,classTime:t,status:!1});case 8:c=e.sent,s(c);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h1",{className:"table-title"},"".concat(u.name.split(" ")[0],"'s schedule")),r.a.createElement("table",{className:"table table-dark table-striped"},r.a.createElement("thead",{className:"table-head"},r.a.createElement("tr",{className:"table-rows"},function(){for(var e=[r.a.createElement("th",{key:A()()},"Time")],t=0;t<5;t+=1){var a=A()().add(L()+t,"days").format("dddd - MMMM Do");e.push(r.a.createElement("th",{key:a},a))}return e}())),r.a.createElement("tbody",null,function(){for(var e=[],t=8;t<18;t+=1){var s=t<10?"0".concat(t):t;e.push(r.a.createElement(M,{user:a,date:A()().format("".concat("YYYY-MM-DDT").concat(s,":00")),clickHandler:l,classes:n,signedUsers:c,key:A()().format("".concat("YYYY-MM-DDT").concat(s,":00"))}))}return e}())))}),H=Object(u.b)((function(e){return{user:e.user,instructors:e.instructors,classes:e.classes,signedUsers:e.signedUsers}}),(function(e){return{addClassy:function(t){e(d(t))},removeClassy:function(t){e({type:"REMOVE_CLASS",classy:t})}}}))(R),Y=a(14),B=(a(37),function(e){var t=e.user,a=e.logIn,c=Object(n.useState)(),s=Object(Y.a)(c,2),o=s[0],u=s[1],l=Object(n.useState)(),m=Object(Y.a)(l,2),d=m[0],p=m[1],f=function(e){"input-email"===e.target.id?u(e.target.value):"input-pass"===e.target.id&&p(e.target.value)},g=function(){var e=Object(E.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O({email:o,pass:d});case 3:if(!1!==(n=e.sent)){e.next=8;break}document.getElementById("login-message").innerHTML="Error: Not a user",e.next=16;break;case 8:if(!0!==n){e.next=12;break}document.getElementById("login-message").innerHTML="Error: Password incorrect",e.next=16;break;case 12:return a({id:n.id,name:n.name,email:n.email}),c=JSON.stringify({id:n.id,name:n.name,email:n.email,remember:!0}),localStorage.setItem("localUser",c),e.abrupt("return",r.a.createElement(i.a,{to:"/home"}));case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login"},t.logged?r.a.createElement(i.a,{to:"/"}):null,r.a.createElement("h1",{id:"login-message"},"Fill the form to login"),r.a.createElement("form",{onSubmit:g,className:"login-form"},r.a.createElement("label",{htmlFor:"email"},"Email:",r.a.createElement("input",{id:"input-email",type:"email",onChange:f,className:"form-control"})),r.a.createElement("label",{htmlFor:"password"},"Password:",r.a.createElement("input",{id:"input-pass",type:"password",onChange:f,className:"form-control"})),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary form-control"})))}),J=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{logIn:function(t){e(function(e){return{type:"LOGIN",user:e}}(t))}}}))(B),P=function(){var e=Object(n.useState)(),t=Object(Y.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(),o=Object(Y.a)(s,2),u=o[0],l=o[1],m=Object(n.useState)(),d=Object(Y.a)(m,2),p=d[0],f=d[1],g=Object(n.useState)(),h=Object(Y.a)(g,2),v=h[0],y=h[1],N=function(e){switch(e.target.id){case"input-name":c(e.target.value);break;case"input-email":l(e.target.value);break;case"input-pass":f(e.target.value);break;case"input-conf":y(e.target.value);break;default:return null}return null},k=function(){var e=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,w({name:a,email:u,pass:p,conf:v});case 3:if(!e.sent.status){e.next=6;break}return e.abrupt("return",r.a.createElement(i.a,{to:"/login"}));case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"signup"},r.a.createElement("form",{onSubmit:k},r.a.createElement("label",{htmlFor:"name"},"Name:",r.a.createElement("input",{id:"input-name",type:"text",onChange:N,className:"form-control"})),r.a.createElement("label",{htmlFor:"email"},"Email:",r.a.createElement("input",{id:"input-email",type:"email",onChange:N,className:"form-control"})),r.a.createElement("label",{htmlFor:"password"},"Password:",r.a.createElement("input",{id:"input-pass",type:"password",onChange:N,className:"form-control"})),r.a.createElement("label",{htmlFor:"password"},"Password confirmation:",r.a.createElement("input",{id:"input-conf",type:"password",onChange:N,className:"form-control"})),r.a.createElement("input",{type:"submit",value:"submit",className:"btn btn-primary form-control"})))},G=(a(75),function(e){var t=e.instructors;return r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(p,null),r.a.createElement("div",{className:"body"},r.a.createElement(x,null),r.a.createElement("div",{className:"main"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(D,{instructors:t})),r.a.createElement(i.b,{path:"/login"},r.a.createElement(J,null)),r.a.createElement(i.b,{path:"/signup"},r.a.createElement(P,null)),r.a.createElement(i.b,{path:"/instructors"},r.a.createElement(_,{instructors:t})),r.a.createElement(i.b,{path:"/instFile/:id"},r.a.createElement(U,{instructors:t})),r.a.createElement(i.b,{path:"/instSchedule/:id"},r.a.createElement(H,null)))))))}),V=Object(u.b)((function(e){return{user:e.user,instructors:e.instructors,classes:e.classes}}),null)(G),X=a(17),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INSTRUCTOR":return[].concat(Object(X.a)(e),[{id:t.instructor.id,name:t.instructor.name,instImage:t.instructor.instImage,dragonName:t.instructor.dragonName,dragonType:t.instructor.dragonType,dragonImage:t.instructor.dragonImage}]);default:return e}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{logged:!0,id:t.user.id,name:t.user.name,email:t.user.email};case"LOGOUT":return{logged:!1,id:0,name:"",email:""};case"UPDATE_USER":return{logged:!0,id:t.id,name:t.name,email:t.email};default:return e}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CLASS":return[].concat(Object(X.a)(e),[{id:t.classy.id,classTime:t.classy.classTime,instructor:t.classy.instructor_id,user:t.classy.user_id,status:t.classy.status}]);case"REMOVE_CLASS":return e.filter((function(e){return e.id!==t.classy}));default:return e}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USERS":return[].concat(Object(X.a)(e),[{id:t.user.id,name:t.user.name}]);default:return e}},Q=Object(o.b)({user:z,instructors:W,classes:q,signedUsers:K}),Z=(a(76),localStorage.getItem("localUser")),$=JSON.parse(Z),ee={};null!==$&&$.remember?$.remember&&(ee={user:{logged:!0,id:$.id,name:$.name,email:$.email},instructors:[],classes:[],signedUsers:[]}):ee={user:{logged:!1,id:"",name:"",email:""},instructors:[],classes:[],signedUsers:[]};var te=Object(o.c)(Q,ee,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:te},r.a.createElement(V,null))),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.b039837d.chunk.js.map